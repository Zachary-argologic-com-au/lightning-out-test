<html>
<style>
[data-lightning-out="true"]
{
}
</style>
                
<script src="https://storyfactory.my.salesforce-sites.com/VolunteerRegistration/lightning/lightning.out.js"></script>
<div data-lightning-out="true"></div>

<script>

    const appName = 'c:lightningOutApp';
    const componentName = 'c:LightningOutFlowLwc';
    const lightningEndpoint = 'https://storyfactory.my.salesforce-sites.com/VolunteerRegistration';
    const targetElement = document.querySelector("[data-lightning-out]");
    
    // read url paramater
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const componentAttributes = {
        flowApiName: 'Contact_Communication_Subscriptions_Preference_Centre',
        flowInputVariables: [{name: 'GUID', type: 'String', value: urlParams.get('GUID')}]
    };

    $Lightning.use(
        appName,
        function (){
            $Lightning.createComponent(
                componentName,
                componentAttributes,
                targetElement,
                function (cmp){
                    console.log('lightning component created');
                }
            );
        },
        lightningEndpoint
    );

</script>
</html>
